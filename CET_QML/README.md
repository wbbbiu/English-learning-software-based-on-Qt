# 英语学习软件（基于Qt）

## 项目概述

本项目旨在开发一个英语学习软件，主要功能包括数据解析、单词推演、句子与四级单词关联处理、学习和复习阶段的智能管理以及数据的初始化与渲染。

## 功能模块

### 数据初始化

当应用程序启动时自动运行的数据初始化模块会执行以下操作：
- **从持久化文件中恢复未完成的学习组和复习组**。
- **从数据库中读取之前存储的学习组和复习组的下标**、今日学习单词数、今日复习单词数、今日学习目标等信息，以便用户能够继续他们的学习或复习进程。

### 渲染主界面

使用上述数据更新QML界面，显示以下内容：
- **今日还需学习或复习的数量**：显示用户今天还需要学习或复习的单词数量。
- **总进度**：展示用户的总体学习进度。
- **当前学习标准**：是否已完成当前学习组的信息，如果已完成，则提示用户进入下一阶段的学习或复习。

### 学习初始化

如果当前学习组已经完成，则进入学习初始化阶段：
- **递增查找下一个未学习的单词**：找到下一个尚未学习的单词，并将其添加到学习组中。
- **关联例句**：将该单词关联的例句添加到学习句子组中，以供学习和复习短句展示之用。
- **加入学习组**：将这些句子中的单词加入学习组，确保它们能够在后续的学习过程中被涵盖。

### 学习复习阶段判断

#### 单词阶段判断

用户在完成当前学习后选择下一步时，QML会发起阶段判断请求来确定是处于学习状态还是复习状态，并据此选择对应的单词组和索引。通过查询数据库检查每个单词的阶段（stage）。如果单词的阶段表明已经学习或复习完成，则跳过该单词；否则，返回这个单词的阶段和ID。找到合适的单词后，更新索引以便下次调用时继续查找，并返回找到的单词的阶段和ID给QML界面。

#### 阶段控制

在单词学习或复习完成后，首先从数据库中查询该单词当前的学习阶段（Score），根据学习进度计算新的学习阶段值，并同步更新到数据库中。根据单词的新阶段值判断单词是否处于学习完成阶段或复习完成阶段：
- **学习完成**：增加今日学习计数器，当达到学习目标时，设置`sentence_flag`为1，表示进入链式学习短句展示。
- **复习完成**：增加今日复习计数器，当达到预设的复习目标数量时，同样设置`sentence_flag`为1，表示进入链式学习短句展示。

### 阶段信息获取

根据前面的阶段判断结果，QML会选择不同的阶段处理函数，这些函数将信息返回给QML进行展示。

#### 阶段1: 单词认知

QML发起请求从数据库获取单词及其音标，并将其返回给QML渲染展示给用户。

#### 阶段2: 单词释义

QML查询数据库中当前学习单词的全部词义及相关信息（包括词性、释义和发音）。系统通过随机生成的答案索引机制增加题目多样性，从数据库中随机选取三个词义作为选项，确保题目具有适当难度。最后，系统将单词信息、答案选项和正确答案索引整合为JSON对象返回给QML进行渲染展示。

#### 阶段3: 语境选择题

QML从数据库中调取当前学习单词的题目、答案及解释等信息。系统采用随机答案索引机制增加题目变化性，从数据库中随机选取三个单词生成选项，维持题目挑战性。所有必要信息被打包成JSON对象返回QML进行展示。

#### 阶段4: 拼写练习

QML从数据库获取当前学习单词的全部词义和拼写形式。系统将词义展示给用户作为提示，用户根据提示进行拼写输入，系统使用获取的单词进行拼写结果验证。

#### 阶段5: 听力拼写

QML查询数据库获取当前学习单词的音标和拼写形式。系统播放单词发音，用户根据听力进行拼写，系统使用获取的单词进行拼写结果验证。

#### 阶段6: 复习短句展示

系统从数据库中提取当前学习句子，将其分割为单词列表（word_list）。随后查询句子中包含的四级词汇，存入cet4s集合。QML接收word_list和cet4s后，逐个处理word_list中的单词：若单词存在于cet4s中，则进行高亮显示，并添加点击跳转功能，可跳转至该单词的详细信息展示页面。

## 使用方法

1. 克隆仓库到本地：
   ```bash
   git clone https://github.com/yourusername/yourrepository.git
